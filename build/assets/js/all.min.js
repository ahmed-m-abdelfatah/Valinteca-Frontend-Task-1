function home(){var e;window.location.href.includes("home.html")&&((e=JSON.parse(localStorage.getItem("userObj")))&&0<e?.id.length?(document.getElementById("use-email").textContent=e.email,document.getElementById("logout").addEventListener("click",()=>{localStorage.removeItem("userObj"),window.location.href="./index.html"})):window.location.href="./register.html")}function validation(){if(window.location.href.includes("register.html")){var e=document.querySelector(".form");const c={username:document.getElementById("username"),email:document.getElementById("email"),password:document.getElementById("password"),cPassword:document.getElementById("c-password")},d={email:{pattern:/^[A-Za-z0-9+_.-]+@(.+)$/,errorMsg:"Email is not valid"},username:{pattern:/^[a-zA-Z][a-zA-Z0-9]{3,13}[a-zA-Z]$/,errorMsg:"Username must consist of 5 to 15 characters, only letters and numbers are allowed, with no numbers at the beginning or the end"},password:{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,errorMsg:"Password minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"}};function l(e,t){return!0===e.pattern.test(t.value.trim())||(m(t,e.errorMsg),!1)}function m(e,t){e=e.parentElement.parentElement;e.className="input-group error",e.querySelector(".error-msg").textContent=t}var t={username:"ahmed",email:"ahmed@ahmed",password:"Ahmed@123",password_confirmation:"Ahmed@123"};for(const r in t)document.getElementsByName(r)[0].value=t[r];e.addEventListener("submit",async e=>{e.preventDefault();var t=c;for(const s in t){const i=t[s];i.addEventListener("change",()=>{var e=i.parentElement.parentElement;e.className="input-group",e.querySelector(".error-msg").textContent=""})}var e=l(d.username,c.username),r=l(d.email,c.email),n=l(d.password,c.password),a=(a=c.password.value,o=c.cPassword.value,a.toLowerCase()===o.toLowerCase()||(m(c.cPassword,"Password and confirmation password should be the same"),!1)),o=function(e){let t=0;for(const n in e){var r=e[n];""===r.value.trim()&&(m(r,"This field is required"),t++)}return 0===t}(c);e&&r&&n&&a&&o&&async function(){let e={};for(const s in c){var t=c[s];e={...e,[t.name]:t.value}}try{var r=await fetch("https://goldblv.com/api/hiring/tasks/register",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}),n=await r.json();if(console.log("data",n.id.length),!r.ok)throw n;0<n.id.length&&(localStorage.setItem("userObj",JSON.stringify(n)),window.location.href="./home.html")}catch(e){if(console.log("error from api",e),e?.errors){var a,o=e.errors;for(const i in o)Object.hasOwnProperty.call(c,i)&&(a=o[i],m(c[i],a.join(", ")))}}}()})}}home(),validation();
//# sourceMappingURL=all.min.js.map
